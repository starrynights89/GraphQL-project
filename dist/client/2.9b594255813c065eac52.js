(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{104:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(2),o=n.n(r),a=n(23),u=n(24),i=n(91),c=n(90);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return b=function(){return e},e}var m=n.n(c)()(b()),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,p(t).apply(this,arguments))}var n,c,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(c=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.d,{query:m},function(t){var n=t.loading,r=t.error,a=t.data;if(n)return o.a.createElement(u.a,null);if(r)return o.a.createElement(i.a,null,o.a.createElement("p",null,r.message));var c=a.currentUser;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{currentUser:c})})})}}])&&l(n.prototype,c),f&&l(n,f),t}()},105:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(23),u=(n(24),n(91),n(90)),i=n.n(u);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query usersSearch($page: Int, $limit: Int, $text: String!) { \n        usersSearch(page: $page, limit: $limit, text: $text) { \n            users {\n                id\n                avatar\n                username\n            }\n        }\n    }\n"]);return y=function(){return e},e}var b=i()(y()),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(u=[{key:"getVariables",value:function(){var e=this.props.variables,t={page:0,limit:5,text:""};return"undefined"!==c(e)&&("undefined"!==c(e.page)&&(t.page=e.page),"undefined"!==c(e.limit)&&(t.limit=e.limit),"undefined"!==c(e.text)&&(t.text=e.text)),t}},{key:"render",value:function(){var e=this.props.children,t=this.getVariables(),n=t.text.length<3;return o.a.createElement(a.d,{query:b,variables:t,skip:n},function(n){var r=n.loading,a=n.error,u=n.data,i=n.fetchMore,f=n.refetch;if(r||a||"undefined"===c(u))return null;var l=u.usersSearch.users;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{users:l,fetchMore:i,variables:t,refetch:f})})})}}])&&f(n.prototype,u),i&&f(n,i),t}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=v(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==h(o)&&"function"!=typeof o?O(r):o,w(O(n),"closeList",function(){n.setState({showList:!1})}),w(O(n),"state",{showList:n.checkLength(n.props.users)}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){this.showList(e.users)}},{key:"checkLength",value:function(e){return e.length>0&&(document.addEventListener("click",this.closeList),!0)}},{key:"showList",value:function(e){this.checkLength(e)?this.setState({showList:!0}):this.closeList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closeList)}},{key:"render",value:function(){var e=this.props.users;return this.state.showList&&o.a.createElement("div",{className:"result"},e.map(function(e,t){return o.a.createElement("div",{key:e.id,className:"user"},o.a.createElement("img",{src:e.avatar}),o.a.createElement("span",null,e.username))}))}}])&&d(n.prototype,a),u&&d(n,u),t}();function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=E(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==_(o)&&"function"!=typeof o?S(r):o,k(S(n),"state",{text:""}),k(S(n),"changeText",function(e){n.setState({text:e.target.value})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.state.text;return o.a.createElement("div",{className:"search"},o.a.createElement("input",{type:"text",onChange:this.changeText,value:e}),o.a.createElement(m,{variables:{text:e}},o.a.createElement(j,null)))}}])&&P(n.prototype,a),u&&P(n,u),t}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(){var e=L(["\n  mutation uploadAvatar($file: Upload!) {\n    uploadAvatar(file: $file) {\n      filename\n      url\n    }\n  }\n"]);return q=function(){return e},e}function z(){var e=L(["\n  query currentUser { \n    currentUser { \n      id\n      username\n      avatar\n    }\n  }\n"]);return z=function(){return e},e}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F=i()(z()),D=i()(q()),U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,N(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.c,{update:function(e,t){var n=t.data.uploadAvatar,r={query:F},o=e.readQuery(r);o.currentUser.avatar=n.url,e.writeData(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{data:o}))},mutation:D},function(t){return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{uploadAvatar:t})})})}}])&&R(n.prototype,u),i&&R(n,i),t}(),Q=n(115),W=n.n(Q),H=n(122),V=n.n(H);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}W.a.setAppElement("#root");var Z={content:{width:"400px",height:"450px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};var ee=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=J(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==K(o)&&"function"!=typeof o?B(r):o,Y(B(n),"state",{result:null,filename:null,filetype:null,src:null,error:null}),Y(B(n),"onChange",function(e){n.setState(e)}),Y(B(n),"uploadAvatar",function(){var e=B(n),t=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([r],{type:n})}(n.state.result);t.name=n.state.filename,n.props.uploadAvatar({variables:{file:t}}).then(function(){e.props.showModal()})}),Y(B(n),"changeImage",function(){n.setState({src:null})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(W.a,{isOpen:this.props.isOpen,onRequestClose:this.props.showModal,contentLabel:"Change avatar",style:Z},o.a.createElement(V.a,{onChange:this.onChange,value:this.state}),null!==this.state.src&&o.a.createElement("button",{className:"cancelUpload",onClick:this.changeImage},"Change image"),o.a.createElement("button",{className:"uploadAvatar",onClick:this.uploadAvatar},"Save"))}}])&&G(n.prototype,a),u&&G(n,u),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=re(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==te(o)&&"function"!=typeof o?oe(r):o,ue(oe(n),"state",{isOpen:!1}),ue(oe(n),"showModal",function(){n.setState({isOpen:!n.state.isOpen})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props.user;return e?o.a.createElement("div",{className:"user"},o.a.createElement("img",{src:e.avatar,onClick:this.showModal}),o.a.createElement(U,null,o.a.createElement(ee,{isOpen:this.state.isOpen,showModal:this.showModal})),o.a.createElement("span",null,e.username)):null}}])&&ne(n.prototype,a),u&&ne(n,u),t}(),ce=n(95);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(){var e,n,r,o,a,u,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];return r=this,o=(e=se(t)).call.apply(e,[this].concat(f)),n=!o||"object"!==fe(o)&&"function"!=typeof o?pe(r):o,a=pe(n),i=function(){n.props.logout().then(function(){localStorage.removeItem("jwt"),n.props.client.resetStore()})},(u="logout")in a?Object.defineProperty(a,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[u]=i,n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("button",{className:"logout",onClick:this.logout},"Logout")}}])&&le(n.prototype,a),u&&le(n,u),t}(),me=Object(a.f)(be),he=n(15);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){var e,n,r,o,a,u,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];return r=this,o=(e=Oe(t)).call.apply(e,[this].concat(f)),n=!o||"object"!==de(o)&&"function"!=typeof o?ge(r):o,a=ge(n),i=function(){n.props.history.push("/app")},(u="goHome")in a?Object.defineProperty(a,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[u]=i,n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("button",{className:"goHome",onClick:this.goHome},"Home")}}])&&ve(n.prototype,a),u&&ve(n,u),t}(),_e=Object(he.k)(je);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation logout {\n    logout {\n      success\n    }\n  }\n"]);return Te=function(){return e},e}var xe=i()(Te()),Ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Se(this,Ce(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.c,{mutation:xe},function(t,n){var r=n.loading,a=n.error;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{logout:t,loading:r,error:a})})})}}])&&Ee(n.prototype,u),i&&Ee(n,i),t}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return qe});var qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,Ne(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"topbar"},o.a.createElement("div",{className:"inner"},o.a.createElement(T,null),o.a.createElement(ce.a,null,o.a.createElement(ie,null))),o.a.createElement("div",{className:"buttons"},o.a.createElement(_e,null),o.a.createElement(Ae,null,o.a.createElement(me,{changeLoginState:this.props.changeLoginState}))))}}])&&Re(n.prototype,a),u&&Re(n,u),t}()},106:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(23),u=n(90),i=n.n(u);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){var e=m(["\n    mutation addMessage($message : MessageInput!) {\n        addMessage(message : $message) {\n            id\n            text\n            user {\n                id\n            }\n        }\n    }\n"]);return y=function(){return e},e}function b(){var e=m(["\n    query chat($chatId: Int!) {\n        chat(chatId: $chatId) {\n            id\n            users {\n                id\n                avatar\n                username\n            }\n            messages {\n                id\n                text\n                user {\n                    id\n                }\n            }\n        }\n    }\n"]);return b=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=i()(b()),d=i()(y()),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.chat;return o.a.createElement(a.c,{update:function(e,t){var r=t.data.addMessage,o=e.readQuery({query:h,variables:{chatId:n.id}});o.chat.messages.push(r),e.writeQuery({query:h,variables:{chatId:n.id},data:o})},mutation:d},function(e){return o.a.Children.map(t,function(t){return o.a.cloneElement(t,{addMessage:e})})})}}])&&f(n.prototype,u),i&&f(n,i),t}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=w(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==O(o)&&"function"!=typeof o?j(r):o,P(j(n),"state",{value:""}),P(j(n),"handleKeyPress",function(e){var t=j(n),r=n.props,o=r.chat,a=r.addMessage;"Enter"===e.key&&n.state.value.length&&a({variables:{message:{text:n.state.value,chatId:o.id}}}).then(function(){t.setState({value:""})})}),P(j(n),"onChangeChatInput",function(e){e.preventDefault(),n.setState({value:e.target.value})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"input"},o.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onChangeChatInput,onKeyPress:this.handleKeyPress}))}}])&&g(n.prototype,a),u&&g(n,u),t}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,T(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.chat,n=e.closeChat;e.user;return o.a.createElement("div",{className:"chatWindow"},o.a.createElement("div",{className:"header"},o.a.createElement("span",null,t.users[1].username),o.a.createElement("button",{className:"close",onClick:function(){return n(t.id)}},"X")),o.a.createElement("div",{className:"messages"},t.messages.map(function(e,t){return o.a.createElement("div",{key:"message"+e.id,className:"message "+(e.user.id>1?"left":"right")},e.text)})),o.a.createElement(v,{chat:t},o.a.createElement(E,{chat:t})))}}])&&C(n.prototype,a),u&&C(n,u),t}(),I=n(24),R=n(91);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query chat($chatId: Int!) {\n    chat(chatId: $chatId) {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      messages {\n        id\n        text\n        user {\n            id\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}var F=i()(L()),D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,q(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,r["Component"]),n=t,(u=[{key:"getVariables",value:function(){var e=this.props.variables,t={};return"undefined"!==M(e.chatId)&&(t.chatId=e.chatId),t}},{key:"render",value:function(){var e=this.props.children,t=this.getVariables();return o.a.createElement(a.d,{query:F,variables:t},function(t){var n=t.loading,r=t.error,a=t.data;if(n)return o.a.createElement(I.a,null);if(r)return o.a.createElement(R.a,null,o.a.createElement("p",null,r.message));var u=a.chat;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{chat:u})})})}}])&&N(n.prototype,u),i&&N(n,i),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query chats { \n    chats {\n      id\n      users {\n        id\n        avatar\n        username\n      }\n      lastMessage {\n        text\n      }\n    }\n  }\n"]);return K=function(){return e},e}var G=i()(K()),J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,H(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.d,{query:G},function(t){var n=t.loading,r=t.error,a=t.data,u=t.subscribeToMore;if(n)return o.a.createElement(I.a,null);if(r)return o.a.createElement(R.a,null,o.a.createElement("p",null,r.message));var i=a.chats;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{chats:i,subscribeToMore:u})})})}}])&&Q(n.prototype,u),i&&Q(n,i),t}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  subscription onMessageAdded {\n    messageAdded {\n      id\n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return re=function(){return e},e}var oe=i()(re()),ae=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=Z(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==B(o)&&"function"!=typeof o?ee(r):o,ne(ee(n),"subscribeToNewMessages",function(){var e=ee(n),t=n.props.user;n.props.subscribeToMore({document:oe,updateQuery:function(n,r){var o=r.subscriptionData;if(!o.data||!n.chats.length)return n;for(var a=-1,u=0;u<n.chats.length;u++)if(n.chats[u].id==o.data.messageAdded.chat.id){a=u;break}if(-1===a)return n;var i=Object.assign({},n.chats[u],{lastMessage:{text:o.data.messageAdded.text,__typename:o.data.messageAdded.__typename}}),c={chats:X(n.chats)};c.chats[u]=i;try{var f=e.props.client.store.cache.readQuery({query:GET_CHAT,variables:{chatId:o.data.messageAdded.chat.id}});t.id!==o.data.messageAdded.user.id&&(f.chat.messages.push(o.data.messageAdded),e.props.client.store.cache.writeQuery({query:GET_CHAT,variables:{chatId:o.data.messageAdded.chat.id},data:f}))}catch(e){}return c}})}),ne(ee(n),"usernamesToString",function(e){for(var t=n.props.user,r="",o=0;o<e.length;o++)e[o].username!==t.username&&(r+=e[o].username),o-1===e.length&&(r+=", ");return r}),ne(ee(n),"getAvatar",function(e){var t=n.props.user;return e.length>2?"/public/group.png":e[0].id!==t.id?e[0].avatar:e[1].avatar}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.subscribeToNewMessages()}},{key:"shorten",value:function(e){return e.length?e.length>12?e.substring(0,e.length-9)+"...":e:""}},{key:"render",value:function(){var e=this,t=this.props.chats;return o.a.createElement("div",{className:"chats"},t.map(function(t,n){return o.a.createElement("div",{key:"chat"+t.id,className:"chat",onClick:function(){return e.props.openChat(t.id)}},o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:e.getAvatar(t.users)}),o.a.createElement("div",null,o.a.createElement("h2",null,e.shorten(e.usernamesToString(t.users))),o.a.createElement("span",null,t.lastMessage&&e.shorten(t.lastMessage.text)))))}))}}])&&Y(n.prototype,a),u&&Y(n,u),t}(),ue=Object(a.f)(ae),ie=n(98);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  subscription onMessageAdded {\n    messageAdded {\n      id \n      text\n      chat {\n        id\n      }\n      user {\n        id\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return ye=function(){return e},e}var be=i()(ye()),me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,se(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.e,{subscription:be},function(t){var n=t.data;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{data:n})})})}}])&&fe(n.prototype,u),i&&fe(n,i),t}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(this,Oe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){"undefined"!==he(e.data)&&"undefined"!==he(e.data.messageAdded)&&e.data&&e.data.messageAdded&&Object(ie.b)(e.data.messageAdded.text,{position:ie.b.POSITION.TOP_LEFT})}},{key:"render",value:function(){return null}}])&&de(n.prototype,o),a&&de(n,a),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return ke});var ke=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=Pe(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==je(o)&&"function"!=typeof o?Ee(r):o,Ce(Ee(n),"state",{openChats:[]}),Ce(Ee(n),"openChat",function(e){var t=n.state.openChats.slice();-1===t.indexOf(e)&&(t.length>2&&(t=t.slice(1)),t.push(e)),n.setState({openChats:t})}),Ce(Ee(n),"closeChat",function(e){var t=n.state.openChats.slice(),r=t.indexOf(e);t.splice(r,1),n.setState({openChats:t})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.user,n=this.state.openChats;return o.a.createElement("div",{className:"wrapper"},o.a.createElement(ie.a,null),o.a.createElement(me,null,o.a.createElement(we,null)),o.a.createElement(J,null,o.a.createElement(ue,{openChat:this.openChat,user:t})),o.a.createElement("div",{className:"openChats"},n.map(function(n,r){return o.a.createElement(D,{key:"chatWindow"+n,variables:{chatId:n}},o.a.createElement(A,{closeChat:e.closeChat,user:t}))})))}}])&&_e(n.prototype,a),u&&_e(n,u),t}()},107:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(108),u=n.n(a),i=n(110),c=n(50);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=s(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==f(o)&&"function"!=typeof o?p(r):o,b(p(n),"state",{show:!1}),b(p(n),"handleClick",function(){var e=n.state.show;n.setState({show:!e},function(){e?document.removeEventListener("click",n.handleClick):document.addEventListener("click",n.handleClick)})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!0)}},{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.children,r=this.state.show;return o.a.createElement("div",{className:"dropdown"},o.a.createElement("div",null,o.a.createElement("div",{className:"trigger",onClick:this.handleClick},t),r&&o.a.createElement("div",{className:"content"},n)))}}])&&l(n.prototype,a),u&&l(n,u),t}(),h=n(23),d=n(90),v=n.n(d);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(){var e=k(["\n    mutation deletePost($postId : Int!) {\n        deletePost(postId : $postId) {\n            success\n        }\n    }\n"]);return S=function(){return e},e}function C(){var e=k(["\n    query postsFeed($page: Int, $limit: Int) { \n        postsFeed(page: $page, limit: $limit) { \n            posts {\n                id\n                text\n                user {\n                    avatar\n                    username\n                }\n            }\n        }\n    }\n"]);return C=function(){return e},e}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=v()(C()),x=v()(S()),A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,P(t).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props.children,t=this.props.post.id,n={page:0,limit:10};return o.a.createElement(h.c,{update:function(e,r){if(r.data.deletePost.success){var o={query:T};"undefined"!==w(n)&&(o.variables=n);for(var a=e.readQuery(o),u=0;u<a.postsFeed.posts.length&&a.postsFeed.posts[u].id!==t;u++);a.postsFeed.posts.splice(u,1),e.writeQuery(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{data:a}))}},mutation:x},function(n){return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{deletePost:n,postId:t})})})}}])&&j(n.prototype,a),u&&j(n,u),t}(),I=function(e){var t=e.deletePost,n=e.postId;return o.a.createElement("button",{onClick:function(){t({variables:{postId:n}})}},"Delete")},R=function(e){var t=e.post,n=e.changeState;return o.a.createElement("div",{className:"header"},o.a.createElement(c.Link,{to:"/user/"+t.user.username},o.a.createElement("img",{src:t.user.avatar}),o.a.createElement("div",null,o.a.createElement("h2",null,t.user.username))),o.a.createElement(m,{trigger:o.a.createElement(i.a,{icon:"angle-down"})},o.a.createElement("button",{onClick:n},"Edit"),o.a.createElement(A,{post:t},o.a.createElement(I,null))))},M=function(e){var t=e.post;return o.a.createElement("p",{className:"content"},t.text)},N=n(97);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(){var e=H(["\nmutation updatePost($post : PostInput!, $postId : Int!) {\n    updatePost(post : $post, postId : $postId) {\n        id\n        text\n    }\n}"]);return Q=function(){return e},e}function W(){var e=H(["\n  query postsFeed($page: Int, $limit: Int) { \n    postsFeed(page: $page, limit: $limit) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return W=function(){return e},e}function H(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var V=v()(W()),K=v()(Q()),G=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=L(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==q(o)&&"function"!=typeof o?F(r):o,U(F(n),"state",{postContent:n.props.post.text}),U(F(n),"changePostContent",function(e){n.setState({postContent:e})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.postContent,r=this.props.post.id,a={page:0,limit:10};return o.a.createElement(h.c,{update:function(e,t){var n=t.data.updatePost,o={query:V};"undefined"!==q(a)&&(o.variables=a);for(var u=e.readQuery(o),i=0;i<u.postsFeed.posts.length;i++)if(u.postsFeed.posts[i].id===r){u.postsFeed.posts[i].text=n.text;break}e.writeQuery(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{data:u}))},optimisticResponse:{__typename:"Mutation",updatePost:{__typename:"Post",text:n}},mutation:K},function(a){return o.a.Children.map(t,function(t){return o.a.cloneElement(t,{updatePost:a,postContent:n,postId:r,changePostContent:e.changePostContent})})})}}])&&z(n.prototype,a),u&&z(n,u),t}(),J=n(3),B=n.n(J);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=Z(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==X(o)&&"function"!=typeof o?ee(r):o,ne(ee(n),"state",{editing:!1}),ne(ee(n),"changeState",function(){var e=n.state.editing;n.setState({editing:!e})}),n}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props.post,t=this.state.editing;return o.a.createElement("div",{className:"post "+(e.id<0?"optimistic":"")},o.a.createElement(R,{post:e,changeState:this.changeState}),!t&&o.a.createElement(M,{post:e}),t&&o.a.createElement(G,{post:e},o.a.createElement(N.a,{changeState:this.changeState})))}}])&&Y(n.prototype,a),u&&Y(n,u),t}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ne(re,"propTypes",{post:B.a.shape({id:B.a.number.isRequired,text:B.a.string.isRequired,user:B.a.shape({avatar:B.a.string.isRequired,username:B.a.string.isRequired}).isRequired}).isRequired}),n.d(t,"a",function(){return se});var se=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),i=0;i<a;i++)u[i]=arguments[i];return r=this,o=(e=ie(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==oe(o)&&"function"!=typeof o?ce(r):o,le(ce(n),"state",{page:0,hasMore:!0}),le(ce(n),"loadMore",function(e){var t=ce(n),r=n.state.page;e({variables:{page:r+1},updateQuery:function(e,n){var o=n.fetchMoreResult;return o.postsFeed.posts.length?(t.setState({page:r+1}),{postsFeed:{__typename:"PostFeed",posts:[].concat(ae(e.postsFeed.posts),ae(o.postsFeed.posts))}}):(t.setState({hasMore:!1}),e)}})}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.posts,r=t.fetchMore,a=this.state.hasMore;return o.a.createElement("div",{className:"feed"},o.a.createElement(u.a,{loadMore:function(){return e.loadMore(r)},hasMore:a,loader:o.a.createElement("div",{className:"loader",key:"loader"},"Loading ...")},n.map(function(e,t){return o.a.createElement(re,{key:e.id,post:e})})))}}])&&ue(n.prototype,a),i&&ue(n,i),t}()},91:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(2),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,c(t).apply(this,arguments))}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement("div",{className:"error message"},e)}}])&&u(n.prototype,a),l&&u(n,l),t}()},95:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(2),o=n.n(r),a=n(23),u=n(90);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query currentUser {\n    currentUser {\n      id\n      username\n      avatar\n    }\n  }\n"]);return p=function(){return e},e}var y=n.n(u)()(p()),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,l(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(u=[{key:"render",value:function(){var e=this.props.children;return o.a.createElement(a.a,null,function(t){var n=t.readQuery({query:y}).currentUser;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{user:n})})})}}])&&c(n.prototype,u),i&&c(n,i),t}()},96:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(2),o=n.n(r),a=n(23),u=n(90),i=n.n(u),c=n(24),f=n(91);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query postsFeed($page: Int, $limit: Int, $username: String) { \n    postsFeed(page: $page, limit: $limit, username: $username) { \n      posts {\n        id\n        text\n        user {\n          avatar\n          username\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}var h=i()(m()),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,y(t).apply(this,arguments))}var n,u,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(u=[{key:"getVariables",value:function(){var e=this.props.variables,t={page:0,limit:10};return"undefined"!==l(e)&&("undefined"!==l(e.page)&&(t.page=e.page),"undefined"!==l(e.limit)&&(t.limit=e.limit)),"undefined"!==l(e.username)&&(t.username=e.username),t}},{key:"render",value:function(){var e=this.props.children,t=this.getVariables();return o.a.createElement(a.d,{query:h,variables:t},function(t){var n=t.loading,r=t.error,a=t.data,u=t.fetchMore;if(n)return o.a.createElement(c.a,null);if(r)return o.a.createElement(f.a,null,o.a.createElement("p",null,r.message));var i=a.postsFeed.posts;return o.a.Children.map(e,function(e){return o.a.cloneElement(e,{posts:i,fetchMore:u})})})}}])&&s(n.prototype,u),i&&s(n,i),t}()},97:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(2),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){var e,n,r,o,u,f,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,p=new Array(s),y=0;y<s;y++)p[y]=arguments[y];return r=this,o=(e=i(t)).call.apply(e,[this].concat(p)),n=!o||"object"!==a(o)&&"function"!=typeof o?c(r):o,u=c(n),l=function(e){n.props.changePostContent(e.target.value)},(f="handlePostContentChange")in u?Object.defineProperty(u,f,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[f]=l,n}var n,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(l=[{key:"render",value:function(){var e=this,t=this.props,n=t.addPost,r=t.updatePost,u=t.postContent,i=t.postId;return o.a.createElement("div",{className:"postForm"},o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),"undefined"!==a(r)?r({variables:{post:{text:u},postId:i}}).then(function(){e.props.changeState()}):n({variables:{post:{text:u}}}).then(function(){e.props.changePostContent("")})}},o.a.createElement("textarea",{value:u,onChange:e.handlePostContentChange,placeholder:"Write your custom post!"}),o.a.createElement("input",{type:"submit",value:"Submit"})))}}])&&u(n.prototype,l),s&&u(n,s),t}()}}]);